# xrenew

**Xserver VPS の無料契約を自動で更新するコマンドラインツール**

`xrenew` は、Xserver VPSの無料契約を自動で延長するためのコマンドラインツールです。Rust製で軽量に動作し、Linuxサーバー上で簡単にセットアップできます。

-----

## ✨ 主な特徴

* **🤖 自動契約更新**: systemdタイマーを利用して、定期的に契約を自動で延長します。
* **CAPTCHA対応**: 画像認証に対応済みです。
* **🔔 Discord通知**: 契約更新の結果をDiscordのWebhook経由で通知できます。
* **軽量動作**: Rust製のため、リソースの消費が少なく、Xserverの無料VPS内でも快適に動作します。
* **簡単セットアップ**: インストールから自動化設定まで、数個のコマンドで完了します。

-----

## 🖥️ 動作環境

* **OS**: Linux (x86\_64 / arm64)
* **必須コンポーネント**: `systemd`

-----

## 🚀 インストール

以下のコマンドを1行実行するだけで、最新バージョンが自動でインストールされます。

```bash
curl -sSf https://raw.githubusercontent.com/h-sumiya/xserver-auto-renew-rs/main/install.sh | bash
```

-----

## 🏁 セットアップ手順

インストール後、以下の手順でセットアップを行ってください。

### 1\. ログイン

まず、`login` コマンドを実行してXserverアカウント情報を登録します。プロンプトに従ってメールアドレスとパスワードを入力してください。

```bash
xrenew login
```

> [\!IMPORTANT]
> 初回ログイン時には **二段階認証** を求められる場合があります。必ずこの`login`コマンドを最初に実行し、認証を済ませてください。

### 2\. 自動延長の有効化

次に、`enable` コマンドを実行して、契約の自動延長を有効化します。これにより、12時間ごとに自動で延長処理が実行されるようになります。

```bash
xrenew enable
```

### 3\. (オプション) Discord通知設定

更新結果をDiscordで受け取りたい場合は、以下のコマンドでWebhook URLを設定してください。

```bash
xrenew webhook <YOUR_DISCORD_WEBHOOK_URL>
```

-----

## 🛠️ コマンド一覧

| コマンド                  | 説明                                                                     |
| ------------------------- | ------------------------------------------------------------------------ |
| `xrenew login`            | Xserverアカウントでログインし、認証情報を保存します。                      |
| `xrenew extend`           | 手動で契約を1回延長します。                                              |
| `xrenew enable`           | systemdタイマーを登録し、契約の自動延長を有効化します。                  |
| `xrenew disable`          | 自動延長のタイマーを無効化します。                                       |
| `xrenew status`           | アカウント情報、Webhook設定、タイマーの状態、実行ログなどを表示します。    |
| `xrenew webhook <URL>`    | 実行結果を通知するDiscord Webhook URLを設定・更新します。                |
| `xrenew update`           | `xrenew`を最新バージョンにアップデートします。                             |
| `xrenew clear`            | 保存されているアカウント情報やログなど、すべてのデータを削除します。       |

-----

## ⚠️ 注意事項

### アップデートについて

> [\!WARNING]
> **v0.1.x系からのアップデートには互換性がありません。**
> 古いバージョンからアップデートする場合、お手数ですが以下の手順で再設定をお願いします。
>
> 1. `xrenew clear` （全データ削除）
> 2. `xrenew disable` （古いタイマーの無効化）
> 3. `xrenew login` （再ログイン）
> 4. `xrenew enable` （自動化の再有効化）

### 免責事項

* 本ツールはXserverの公式ツールではありません。ツールの利用はすべて **自己責任** でお願いします。
* 保存された認証情報は `~/.local/share/xrenew` 以下に保存されます。
